<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    <style>
        #korisnikDiv {
            display: none;
        }

        #dispecerDiv {
            display: none;
        }
    </style>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Taxi Application</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/StyleHtml/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/StyleHtml/css/font-awesome.min.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            let primljeno = localStorage.getItem("logovan");
            let usernameKor;
            $.ajax({
                type: 'POST',
                url: '/api/Start',
                data: JSON.stringify(primljeno),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {
                    dataTmp = data;
                    usernameKor = `${dataTmp.KorisnickoIme}`;
                    if (data != null) {
                        alert('Uspesno slanje.');
                        if (data.Uloga == 2) {
                            $("#dispecerDiv").hide();
                            $("#izmeniKorisnika").hide();
                            $("#korisnikDiv").hide();
                            $("usernameKorisnika").show();
                            $("#usernameKorisnika").html(usernameKor);
                        } else if (data.Uloga == 0) {
                            $("#korisnikDiv").show();
                            $("#izmeniKorisnika").hide();
                            $("#dispecerDiv").hide();
                            $("usernameKorisnika").show();
                            $("#usernameKorisnika").html(usernameKor);
                        } else {
                        }
                    } else {
                        alert('Neuspesno slanje.');
                    }
                },
            })

            $("#showInfo").click(function () {
                //$("#IzmenaKorisnik").hide();
                //$("#PrikazDispecer").hide();
                $("#PrikazKorisnikInfo").show();

                let tableofData = "<table class=\"table\">";
                tableofData += `<tr><td>Korisnicko ime</td><td>${dataTmp.KorisnickoIme}</td></tr>`;
                tableofData += `<tr><td>Lozinka</td><td>${dataTmp.Lozinka}</td></tr>`;
                tableofData += `<tr><td>Ime</td><td>${dataTmp.Ime}</td></tr>`;
                tableofData += `<tr><td>Prezime</td><td>${dataTmp.Prezime}</td></tr>`;
                tableofData += `<tr><td>JMBG</td><td>${dataTmp.JMBG}</td></tr>`;
                tableofData += `<tr><td>Kontakt telefon</td><td>${dataTmp.KontaktTelefon}</td></tr>`;
                tableofData += `<tr><td>Email</td><td>${dataTmp.Email}</td></tr>`;
                tableofData += "</table>";
                $("#PrikazKorisnikInfo").html(tableofData);
            });
        });
    </script>
</head>
<body>
    <div class="container" id="korisnikDiv">
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <div class="well">
                    <h3 align="center">
                        <span>
                            Hello, <span id="usernameKorisnika"></span>
                        </span>
                    </h3>
                    <span>
                        <button type="button" class="btn btn-success">Edit info</button>
                        <button type="button" class="btn btn-warning" id="showInfo">Show info</button>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <div class="container" id="PrikazKorisnikInfo">
        <div class="row">
            <div class="well well-float">

            </div>
        </div>
    </div>

        <div id="dispecerDiv">
            <p>Div za dispecera</p>
        </div>
</body>
</html>
